import{n as S,p as ye,q as rt,o as d,c as p,b as s,h as L,v as K,j as F,F as O,r as P,t as W,a as Te,k as oe,s as ne,u as j,d as De,x as A,y as X,z as ge,g as C,A as Q,B as xe,C as D,D as Ue,E as ut,G as Fe,H as ie,I as de,J as dt,f as Y,K as ct,w as Be,T as pt,L as ft,m as mt,M as vt}from"./app.js";import $e from"./PaginationComponent.js";import{G as re,V as yt}from"./vue-datepicker.js";import"./_plugin-vue_export-helper.js";const U=S([]),ue=S([]);function Le(){return{queryGroups:U,rules:ue,addQueryGroup:r=>{U.value.push({id:r,rules:[],condition:""})},removeQueryGroup:r=>{U.value=U.value.filter(y=>y.id!==r)},addRule:(r,y)=>{U.value.filter(l=>{l.id===r&&l.rules.push({id:y,field:"",operator:"",value:"",condition:""})}),ue.value.push(y)},removeRule:(r,y)=>{U.value.filter(l=>{l.id===r&&(l.rules=l.rules.filter(u=>u.id!==y))}),ue.value=ue.value.filter(l=>l!==y)},findGroup:r=>U.value.filter(l=>{if(l.id===r)return l}),getGroupRules:r=>U.value.filter(l=>{if(l.id===r)return l}),updateRuleFilter:(r,y,l)=>{U.value.filter(u=>{u.id===r&&u.rules.filter(m=>{m.id===y&&(m.condition=l.condition,m.field=l.field,m.operator=l.operator,m.value=l.value)})})},setQueryGroups:r=>{U.value=r}}}const gt={class:"d-flex justify-content-between align-items-center border p-2"},Et={class:"d-flex align-items-center"},bt={class:"d-flex flex-column"},St={class:"d-flex mt-1"},Ct=["value"],_t={__name:"Rule",props:["fields","groupIndex","index","itemNumber","values"],setup(e){const t=e,n=S({condition:"",field:"",operator:"",value:""}),o=S([]);ye(()=>{n.value=t.values}),rt(()=>{n.value=t.values});const{removeRule:a,updateRuleFilter:i}=Le(),g=(y,l)=>{a(y,l)},f=()=>{i(t.groupIndex,t.index,n.value)},r=()=>{n.value.value=o.value.join(","),i(t.groupIndex,t.index,n.value)};return(y,l)=>(d(),p("div",gt,[s("div",Et,[s("div",bt,[t.itemNumber>0?L((d(),p("select",{key:0,class:"form-select form-select-sm",style:{width:"80px","background-color":"#ddd"},"onUpdate:modelValue":l[0]||(l[0]=u=>n.value.condition=u),onChange:f},l[11]||(l[11]=[s("option",{value:"AND"},"AND",-1),s("option",{value:"OR"},"OR",-1)]),544)),[[K,n.value.condition]]):F("",!0),s("div",St,[L(s("select",{class:"form-select","onUpdate:modelValue":l[1]||(l[1]=u=>n.value.field=u),onChange:f},[(d(!0),p(O,null,P(e.fields,(u,m)=>(d(),p("option",{key:m,value:u.key},W(u.text),9,Ct))),128))],544),[[K,n.value.field]]),L(s("select",{class:"form-select","onUpdate:modelValue":l[2]||(l[2]=u=>n.value.operator=u),onChange:f},l[12]||(l[12]=[Te('<option value="EQUAL">is equal</option><option value="NOT_EQUAL">is not equal</option><option value="LIKE">like</option><option value="NOT_LIKE">not like</option><option value="IN">contains</option><option value="NOT_IN">does not contain</option><option value="GREATER_THAN">is greater than</option><option value="GREATER_THAN_OR_EQUAL">is greater than or equal</option><option value="LESS_THAN">is less than </option><option value="LESS_THAN_OR_EQUAL">is less than or equal</option><option value="IS_NULL">is empty</option><option value="IS_NOT_NULL">is not empty</option><option value="BETWEEN">between</option><option value="NOT_BETWEEN">not between</option><option value="WHERE_DATE">date</option><option value="WHERE_DATE_BETWEEN">date between</option><option value="WHERE_DATETIME">datetime</option><option value="WHERE_DATETIME_BETWEEN">datetime between</option>',18)]),544),[[K,n.value.operator]]),n.value.operator==="BETWEEN"||n.value.operator==="NOT_BETWEEN"?(d(),p(O,{key:0},[L(s("input",{class:"form-control",type:"text","onUpdate:modelValue":l[3]||(l[3]=u=>o.value[0]=u),onChange:r},null,544),[[oe,o.value[0]]]),L(s("input",{class:"form-control",type:"text","onUpdate:modelValue":l[4]||(l[4]=u=>o.value[1]=u),onChange:r},null,544),[[oe,o.value[1]]])],64)):n.value.operator==="WHERE_DATE"?(d(),ne(j(re),{key:1,modelValue:n.value.value,"onUpdate:modelValue":l[5]||(l[5]=u=>n.value.value=u),"enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue"])):n.value.operator==="WHERE_DATE_BETWEEN"?(d(),ne(j(re),{key:2,modelValue:n.value.value,"onUpdate:modelValue":l[6]||(l[6]=u=>n.value.value=u),range:"","enable-time-picker":!1,format:"dd/MM/yyyy"},null,8,["modelValue"])):n.value.operator==="WHERE_DATETIME"?(d(),ne(j(re),{key:3,modelValue:n.value.value,"onUpdate:modelValue":l[7]||(l[7]=u=>n.value.value=u),format:"dd/MM/yyyy HH:mm"},null,8,["modelValue"])):n.value.operator==="WHERE_DATETIME_BETWEEN"?(d(),ne(j(re),{key:4,modelValue:n.value.value,"onUpdate:modelValue":l[8]||(l[8]=u=>n.value.value=u),range:"",format:"dd/MM/yyyy HH:mm"},null,8,["modelValue"])):L((d(),p("input",{key:5,class:"form-control",type:"text","onUpdate:modelValue":l[9]||(l[9]=u=>n.value.value=u),onChange:f},null,544)),[[oe,n.value.value]])])])]),s("button",{class:"btn btn-danger",onClick:l[10]||(l[10]=u=>g(e.groupIndex,e.index))},l[13]||(l[13]=[s("i",{class:"fa-solid fa-trash"},null,-1),De(" Remove ")]))]))}},ht={class:"d-flex border p-2 flex-column"},Tt={class:"d-flex justify-content-between"},At={class:"d-flex flex-column flex-wrap mt-3"},Nt={__name:"RuleGroup",props:["fields","index"],setup(e){const t=e,{removeQueryGroup:n,addRule:o,queryGroups:a}=Le(),i=A(()=>a.value.filter(r=>{if(r.id===t.index)return r})),g=()=>{o(t.index,`rule-${Math.random()}`)};return(f,r)=>(d(),p("div",ht,[s("div",Tt,[s("div",{class:"d-flex align-items-center"},[s("button",{class:"btn btn-sm btn-primary text-white",onClick:g},"Add Rule"),r[1]||(r[1]=s("p",{class:"text-info m-0 ps-3"},"Add rule to filter records.",-1))]),s("button",{class:"btn btn-danger",onClick:r[0]||(r[0]=y=>j(n)(e.index))},r[2]||(r[2]=[s("i",{class:"fa-solid fa-trash"},null,-1),De(" Remove Group ")]))]),s("div",At,[(d(!0),p(O,null,P(i.value,(y,l)=>(d(),p(O,{key:l},[(d(!0),p(O,null,P(y.rules,(u,m)=>(d(),ne(_t,{key:m,fields:e.fields,"item-number":m,"group-index":e.index,index:u.id,values:u},null,8,["fields","item-number","group-index","index","values"]))),128))],64))),128))])]))}},se={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},ee={LIGHT:"light",DARK:"dark",COLORED:"colored",AUTO:"auto"},x={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},It={BOUNCE:"bounce",SLIDE:"slide",FLIP:"flip",ZOOM:"zoom",NONE:"none"},He={dangerouslyHTMLString:!1,multiple:!0,position:se.TOP_RIGHT,autoClose:5e3,transition:"bounce",hideProgressBar:!1,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,className:"",bodyClassName:"",style:{},progressClassName:"",progressStyle:{},role:"alert",theme:"light"},Ot={rtl:!1,newestOnTop:!1,toastClassName:""},Ge={...He,...Ot};({...He,type:x.DEFAULT});var E=(e=>(e[e.COLLAPSE_DURATION=300]="COLLAPSE_DURATION",e[e.DEBOUNCE_DURATION=50]="DEBOUNCE_DURATION",e.CSS_NAMESPACE="Toastify",e))(E||{}),Ae=(e=>(e.ENTRANCE_ANIMATION_END="d",e))(Ae||{});const kt={enter:"Toastify--animate Toastify__bounce-enter",exit:"Toastify--animate Toastify__bounce-exit",appendPosition:!0},xt={enter:"Toastify--animate Toastify__slide-enter",exit:"Toastify--animate Toastify__slide-exit",appendPosition:!0},Lt={enter:"Toastify--animate Toastify__zoom-enter",exit:"Toastify--animate Toastify__zoom-exit"},Rt={enter:"Toastify--animate Toastify__flip-enter",exit:"Toastify--animate Toastify__flip-exit"},Me="Toastify--animate Toastify__none-enter";function Ve(e,t=!1){var n;let o=kt;if(!e||typeof e=="string")switch(e){case"flip":o=Rt;break;case"zoom":o=Lt;break;case"slide":o=xt;break}else o=e;if(t)o.enter=Me;else if(o.enter===Me){const a=(n=o.exit.split("__")[1])==null?void 0:n.split("-")[0];o.enter=`Toastify--animate Toastify__${a}-enter`}return o}function wt(e){return e.containerId||String(e.position)}const Ee="will-unmount";function Pt(e=se.TOP_RIGHT){return!!document.querySelector(`.${E.CSS_NAMESPACE}__toast-container--${e}`)}function Bt(e=se.TOP_RIGHT){return`${E.CSS_NAMESPACE}__toast-container--${e}`}function $t(e,t,n=!1){const o=[`${E.CSS_NAMESPACE}__toast-container`,`${E.CSS_NAMESPACE}__toast-container--${e}`,n?`${E.CSS_NAMESPACE}__toast-container--rtl`:null].filter(Boolean).join(" ");return Z(t)?t({position:e,rtl:n,defaultClassName:o}):`${o} ${t||""}`}function Mt(e){var t;const{position:n,containerClassName:o,rtl:a=!1,style:i={}}=e,g=E.CSS_NAMESPACE,f=Bt(n),r=document.querySelector(`.${g}`),y=document.querySelector(`.${f}`),l=!!y&&!((t=y.className)!=null&&t.includes(Ee)),u=r||document.createElement("div"),m=document.createElement("div");m.className=$t(n,o,a),m.dataset.testid=`${E.CSS_NAMESPACE}__toast-container--${n}`,m.id=wt(e);for(const h in i)if(Object.prototype.hasOwnProperty.call(i,h)){const N=i[h];m.style[h]=N}return r||(u.className=E.CSS_NAMESPACE,document.body.appendChild(u)),l||u.appendChild(m),m}function Ne(e){var t,n,o;const a=typeof e=="string"?e:((t=e.currentTarget)==null?void 0:t.id)||((n=e.target)==null?void 0:n.id),i=document.getElementById(a);i&&i.removeEventListener("animationend",Ne,!1);try{le[a].unmount(),(o=document.getElementById(a))==null||o.remove(),delete le[a],delete I[a]}catch{}}const le=X({});function qt(e,t){const n=document.getElementById(String(t));n&&(le[n.id]=e)}function Ie(e,t=!0){const n=String(e);if(!le[n])return;const o=document.getElementById(n);o&&o.classList.add(Ee),t?(Ut(e),o&&o.addEventListener("animationend",Ne,!1)):Ne(n),H.items=H.items.filter(a=>a.containerId!==e)}function Dt(e){for(const t in le)Ie(t,e);H.items=[]}function je(e,t){const n=document.getElementById(e.toastId);if(n){let o=e;o={...o,...Ve(o.transition)};const a=o.appendPosition?`${o.exit}--${o.position}`:o.exit;n.className+=` ${a}`,t&&t(n)}}function Ut(e){for(const t in I)if(t===e)for(const n of I[t]||[])je(n)}function Ft(e){const t=te().find(n=>n.toastId===e);return t==null?void 0:t.containerId}function Re(e){return document.getElementById(e)}function Ht(e){const t=Re(e.containerId);return t&&t.classList.contains(Ee)}function qe(e){var t;const n=Ue(e.content)?D(e.content.props):null;return n??D((t=e.data)!=null?t:{})}function Gt(e){return e?H.items.filter(t=>t.containerId===e).length>0:H.items.length>0}function Vt(){if(H.items.length>0){const e=H.items.shift();ce(e==null?void 0:e.toastContent,e==null?void 0:e.toastProps)}}const I=X({}),H=X({items:[]});function te(){const e=D(I);return Object.values(e).reduce((t,n)=>[...t,...n],[])}function jt(e){return te().find(t=>t.toastId===e)}function ce(e,t={}){if(Ht(t)){const n=Re(t.containerId);n&&n.addEventListener("animationend",Oe.bind(null,e,t),!1)}else Oe(e,t)}function Oe(e,t={}){const n=Re(t.containerId);n&&n.removeEventListener("animationend",Oe.bind(null,e,t),!1);const o=I[t.containerId]||[],a=o.length>0;if(!a&&!Pt(t.position)){const i=Mt(t),g=ut(pn,t);t.useHandler&&t.useHandler(g),g.mount(i),qt(g,i.id)}a&&!t.updateId&&(t.position=o[0].position),xe(()=>{t.updateId?w.update(t):w.add(e,t)})}const w={add(e,t){const{containerId:n=""}=t;n&&(I[n]=I[n]||[],I[n].find(o=>o.toastId===t.toastId)||setTimeout(()=>{var o,a;t.newestOnTop?(o=I[n])==null||o.unshift(t):(a=I[n])==null||a.push(t),t.onOpen&&t.onOpen(qe(t))},t.delay||0))},remove(e){if(e){const t=Ft(e);if(t){const n=I[t];let o=n.find(a=>a.toastId===e);I[t]=n.filter(a=>a.toastId!==e),!I[t].length&&!Gt(t)&&Ie(t,!1),Vt(),xe(()=>{o!=null&&o.onClose&&(o.onClose(qe(o)),o=void 0)})}}},update(e={}){const{containerId:t=""}=e;if(t&&e.updateId){I[t]=I[t]||[];const n=I[t].find(i=>i.toastId===e.toastId),o=(n==null?void 0:n.position)!==e.position||(n==null?void 0:n.transition)!==e.transition,a={...e,disabledEnterTransition:!o,updateId:void 0};w.dismissForce(e==null?void 0:e.toastId),setTimeout(()=>{b(a.content,a)},e.delay||0)}},clear(e,t=!0){e?Ie(e,t):Dt(t)},dismissCallback(e){var t;const n=(t=e.currentTarget)==null?void 0:t.id,o=document.getElementById(n);o&&(o.removeEventListener("animationend",w.dismissCallback,!1),setTimeout(()=>{w.remove(n)}))},dismiss(e){if(e){const t=te();for(const n of t)if(n.toastId===e){je(n,o=>{o.addEventListener("animationend",w.dismissCallback,!1)});break}}},dismissForce(e){if(e){const t=te();for(const n of t)if(n.toastId===e){const o=document.getElementById(e);o&&(o.remove(),o.removeEventListener("animationend",w.dismissCallback,!1),w.remove(e));break}}}},zt=X({useHandler:void 0}),ze=X({}),ve=X({});function We(){return Math.random().toString(36).substring(2,9)}function Wt(e){return typeof e=="number"&&!isNaN(e)}function ke(e){return typeof e=="string"}function Z(e){return typeof e=="function"}function be(...e){return Q(...e)}function pe(e){return typeof e=="object"&&(!!(e!=null&&e.render)||!!(e!=null&&e.setup)||typeof(e==null?void 0:e.type)=="object")}function Qt(e={}){ze[`${E.CSS_NAMESPACE}-default-options`]=e}function Jt(){return ze[`${E.CSS_NAMESPACE}-default-options`]||Ge}function Kt(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches;return document.documentElement.classList.contains("dark")||e?"dark":"light"}var fe=(e=>(e[e.Enter=0]="Enter",e[e.Exit=1]="Exit",e))(fe||{});const Qe={containerId:{type:[String,Number],required:!1,default:""},clearOnUrlChange:{type:Boolean,required:!1,default:!0},disabledEnterTransition:{type:Boolean,required:!1,default:!1},dangerouslyHTMLString:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!0},limit:{type:Number,required:!1,default:void 0},position:{type:String,required:!1,default:se.TOP_LEFT},bodyClassName:{type:String,required:!1,default:""},autoClose:{type:[Number,Boolean],required:!1,default:!1},closeButton:{type:[Boolean,Function,Object],required:!1,default:void 0},transition:{type:[String,Object],required:!1,default:"bounce"},hideProgressBar:{type:Boolean,required:!1,default:!1},pauseOnHover:{type:Boolean,required:!1,default:!0},pauseOnFocusLoss:{type:Boolean,required:!1,default:!0},closeOnClick:{type:Boolean,required:!1,default:!0},progress:{type:Number,required:!1,default:void 0},progressClassName:{type:String,required:!1,default:""},toastStyle:{type:Object,required:!1,default(){return{}}},progressStyle:{type:Object,required:!1,default(){return{}}},role:{type:String,required:!1,default:"alert"},theme:{type:String,required:!1,default:ee.AUTO},content:{type:[String,Object,Function],required:!1,default:""},toastId:{type:[String,Number],required:!1,default:""},data:{type:[Object,String],required:!1,default(){return{}}},type:{type:String,required:!1,default:x.DEFAULT},icon:{type:[Boolean,String,Number,Object,Function],required:!1,default:void 0},delay:{type:Number,required:!1,default:void 0},onOpen:{type:Function,required:!1,default:void 0},onClose:{type:Function,required:!1,default:void 0},onClick:{type:Function,required:!1,default:void 0},isLoading:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},toastClassName:{type:String,required:!1,default:""},updateId:{type:[String,Number],required:!1,default:""},contentProps:{type:Object,required:!1,default:null},expandCustomProps:{type:Boolean,required:!1,default:!1}},Xt={autoClose:{type:[Number,Boolean],required:!0},isRunning:{type:Boolean,required:!1,default:void 0},type:{type:String,required:!1,default:x.DEFAULT},theme:{type:String,required:!1,default:ee.AUTO},hide:{type:Boolean,required:!1,default:void 0},className:{type:[String,Function],required:!1,default:""},controlledProgress:{type:Boolean,required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:void 0},isIn:{type:Boolean,required:!1,default:void 0},progress:{type:Number,required:!1,default:void 0},closeToast:{type:Function,required:!1,default:void 0}},Yt=ge({name:"ProgressBar",props:Xt,setup(e,{attrs:t}){const n=S(),o=A(()=>e.hide?"true":"false"),a=A(()=>({...t.style||{},animationDuration:`${e.autoClose===!0?5e3:e.autoClose}ms`,animationPlayState:e.isRunning?"running":"paused",opacity:e.hide||e.autoClose===!1?0:1,transform:e.controlledProgress?`scaleX(${e.progress})`:"none"})),i=A(()=>[`${E.CSS_NAMESPACE}__progress-bar`,e.controlledProgress?`${E.CSS_NAMESPACE}__progress-bar--controlled`:`${E.CSS_NAMESPACE}__progress-bar--animated`,`${E.CSS_NAMESPACE}__progress-bar-theme--${e.theme}`,`${E.CSS_NAMESPACE}__progress-bar--${e.type}`,e.rtl?`${E.CSS_NAMESPACE}__progress-bar--rtl`:null].filter(Boolean).join(" ")),g=A(()=>`${i.value} ${(t==null?void 0:t.class)||""}`),f=()=>{n.value&&(n.value.onanimationend=null,n.value.ontransitionend=null)},r=()=>{e.isIn&&e.closeToast&&e.autoClose!==!1&&(e.closeToast(),f())},y=A(()=>e.controlledProgress?null:r),l=A(()=>e.controlledProgress?r:null);return de(()=>{n.value&&(f(),n.value.onanimationend=y.value,n.value.ontransitionend=l.value)}),()=>C("div",{ref:n,role:"progressbar","aria-hidden":o.value,"aria-label":"notification timer",class:g.value,style:a.value},null)}}),Zt=ge({name:"CloseButton",inheritAttrs:!1,props:{theme:{type:String,required:!1,default:ee.AUTO},type:{type:String,required:!1,default:ee.LIGHT},ariaLabel:{type:String,required:!1,default:"close"},closeToast:{type:Function,required:!1,default:void 0}},setup(e){return()=>C("button",{class:`${E.CSS_NAMESPACE}__close-button ${E.CSS_NAMESPACE}__close-button--${e.theme}`,type:"button",onClick:t=>{t.stopPropagation(),e.closeToast&&e.closeToast(t)},"aria-label":e.ariaLabel},[C("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},[C("path",{"fill-rule":"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"},null)])])}}),Se=({theme:e,type:t,path:n,...o})=>C("svg",Q({viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`},o),[C("path",{d:n},null)]);function en(e){return C(Se,Q(e,{path:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}),null)}function tn(e){return C(Se,Q(e,{path:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}),null)}function nn(e){return C(Se,Q(e,{path:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}),null)}function on(e){return C(Se,Q(e,{path:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}),null)}function an(){return C("div",{class:`${E.CSS_NAMESPACE}__spinner`},null)}const me={info:tn,warning:en,success:nn,error:on,spinner:an},ln=e=>e in me;function sn({theme:e,type:t,isLoading:n,icon:o}){let a;const i=!!n||t==="loading",g={theme:e,type:t};if(i&&(o===void 0||typeof o=="boolean"))return me.spinner();if(o!==!1){if(pe(o))a=D(o);else if(Z(o)){const f=o;g.type=i?"loading":t,a=f(g),a=!a&&i?me.spinner():a}else Ue(o)?a=dt(o,g):ke(o)||Wt(o)?a=o:ln(t)&&(a=me[t](g));return a}}const rn=()=>{};function un(e,t,n=E.COLLAPSE_DURATION){const{scrollHeight:o,style:a}=e,i=n;requestAnimationFrame(()=>{a.minHeight="initial",a.height=o+"px",a.transition=`all ${i}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,i)})})}function dn(e){const t=S(!1),n=S(!1),o=S(!1),a=S(fe.Enter),i=X({...e,appendPosition:e.appendPosition||!1,collapse:typeof e.collapse>"u"?!0:e.collapse,collapseDuration:e.collapseDuration||E.COLLAPSE_DURATION}),g=i.done||rn,f=A(()=>i.appendPosition?`${i.enter}--${i.position}`:i.enter),r=A(()=>i.appendPosition?`${i.exit}--${i.position}`:i.exit),y=A(()=>e.pauseOnHover?{onMouseenter:$,onMouseleave:B}:{});function l(){const _=f.value.split(" ");m().addEventListener(Ae.ENTRANCE_ANIMATION_END,B,{once:!0});const R=G=>{const q=m();G.target===q&&(q.dispatchEvent(new Event(Ae.ENTRANCE_ANIMATION_END)),q.removeEventListener("animationend",R),q.removeEventListener("animationcancel",R),a.value===fe.Enter&&G.type!=="animationcancel"&&q.classList.remove(..._))},M=()=>{const G=m();G.classList.add(..._),G.addEventListener("animationend",R),G.addEventListener("animationcancel",R)};e.pauseOnFocusLoss&&h(),M()}function u(){if(!m())return;const _=()=>{const M=m();M.removeEventListener("animationend",_),i.collapse?un(M,g,i.collapseDuration):g()},R=()=>{const M=m();a.value=fe.Exit,M&&(M.className+=` ${r.value}`,M.addEventListener("animationend",_))};n.value||(o.value?_():setTimeout(R))}function m(){return e.toastRef.value}function h(){document.hasFocus()||$(),window.addEventListener("focus",B),window.addEventListener("blur",$)}function N(){window.removeEventListener("focus",B),window.removeEventListener("blur",$)}function B(){(!e.loading.value||e.isLoading===void 0)&&(t.value=!0)}function $(){t.value=!1}function z(_){_&&(_.stopPropagation(),_.preventDefault()),n.value=!1}return de(u),de(()=>{const _=te();n.value=_.findIndex(R=>R.toastId===i.toastId)>-1}),de(()=>{e.isLoading!==void 0&&(e.loading.value?$():B())}),ye(l),Fe(()=>{e.pauseOnFocusLoss&&N()}),{isIn:n,isRunning:t,hideToast:z,eventHandlers:y}}const cn=ge({name:"ToastItem",inheritAttrs:!1,props:Qe,setup(e){const t=S(),n=A(()=>!!e.isLoading),o=A(()=>e.progress!==void 0&&e.progress!==null),a=A(()=>sn(e)),i=A(()=>[`${E.CSS_NAMESPACE}__toast`,`${E.CSS_NAMESPACE}__toast-theme--${e.theme}`,`${E.CSS_NAMESPACE}__toast--${e.type}`,e.rtl?`${E.CSS_NAMESPACE}__toast--rtl`:void 0,e.toastClassName||""].filter(Boolean).join(" ")),{isRunning:g,isIn:f,hideToast:r,eventHandlers:y}=dn({toastRef:t,loading:n,done:()=>{w.remove(e.toastId)},...Ve(e.transition,e.disabledEnterTransition),...e});return()=>C("div",Q({id:e.toastId,class:i.value,style:e.toastStyle||{},ref:t,"data-testid":`toast-item-${e.toastId}`,onClick:l=>{e.closeOnClick&&r(),e.onClick&&e.onClick(l)}},y.value),[C("div",{role:e.role,"data-testid":"toast-body",class:`${E.CSS_NAMESPACE}__toast-body ${e.bodyClassName||""}`},[a.value!=null&&C("div",{"data-testid":`toast-icon-${e.type}`,class:[`${E.CSS_NAMESPACE}__toast-icon`,e.isLoading?"":`${E.CSS_NAMESPACE}--animate-icon ${E.CSS_NAMESPACE}__zoom-enter`].join(" ")},[pe(a.value)?ie(D(a.value),{theme:e.theme,type:e.type}):Z(a.value)?a.value({theme:e.theme,type:e.type}):a.value]),C("div",{"data-testid":"toast-content"},[pe(e.content)?ie(D(e.content),{toastProps:D(e),closeToast:r,data:e.data,...e.expandCustomProps?e.contentProps:{contentProps:e.contentProps||{}}}):Z(e.content)?e.content({toastProps:D(e),closeToast:r,data:e.data}):e.dangerouslyHTMLString?ie("div",{innerHTML:e.content}):e.content])]),(e.closeButton===void 0||e.closeButton===!0)&&C(Zt,{theme:e.theme,closeToast:l=>{l.stopPropagation(),l.preventDefault(),r()}},null),pe(e.closeButton)?ie(D(e.closeButton),{closeToast:r,type:e.type,theme:e.theme}):Z(e.closeButton)?e.closeButton({closeToast:r,type:e.type,theme:e.theme}):null,C(Yt,{className:e.progressClassName,style:e.progressStyle,rtl:e.rtl,theme:e.theme,isIn:f.value,type:e.type,hide:e.hideProgressBar,isRunning:g.value,autoClose:e.autoClose,controlledProgress:o.value,progress:e.progress,closeToast:e.isLoading?void 0:r},null)])}});let ae=0;function Je(){typeof window>"u"||(ae&&window.cancelAnimationFrame(ae),ae=window.requestAnimationFrame(Je),ve.lastUrl!==window.location.href&&(ve.lastUrl=window.location.href,w.clear()))}const pn=ge({name:"ToastifyContainer",inheritAttrs:!1,props:Qe,setup(e){const t=A(()=>e.containerId),n=A(()=>I[t.value]||[]),o=A(()=>n.value.filter(a=>a.position===e.position));return ye(()=>{typeof window<"u"&&e.clearOnUrlChange&&window.requestAnimationFrame(Je)}),Fe(()=>{typeof window<"u"&&ae&&(window.cancelAnimationFrame(ae),ve.lastUrl="")}),()=>C(O,null,[o.value.map(a=>{const{toastId:i=""}=a;return C(cn,Q({key:i},a),null)})])}});let he=!1;const Ke={isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1};function Xe(){const e=[];return te().forEach(t=>{const n=document.getElementById(t.containerId);n&&!n.classList.contains(Ee)&&e.push(t)}),e}function fn(e){const t=Xe().length,n=e??0;return n>0&&t+H.items.length>=n}function mn(e){fn(e.limit)&&!e.updateId&&H.items.push({toastId:e.toastId,containerId:e.containerId,toastContent:e.content,toastProps:e})}function J(e,t,n={}){if(he)return;n=be(Jt(),{type:t},D(n)),(!n.toastId||typeof n.toastId!="string"&&typeof n.toastId!="number")&&(n.toastId=We()),n={...n,...n.type==="loading"?Ke:{},content:e,containerId:n.containerId||String(n.position)};const o=Number(n==null?void 0:n.progress);return!isNaN(o)&&o<0&&(n.progress=0),o>1&&(n.progress=1),n.theme==="auto"&&(n.theme=Kt()),mn(n),ve.lastUrl=window.location.href,n.multiple?H.items.length?n.updateId&&ce(e,n):ce(e,n):(he=!0,b.clearAll(void 0,!1),setTimeout(()=>{ce(e,n)},0),setTimeout(()=>{he=!1},390)),n.toastId}const b=(e,t)=>J(e,x.DEFAULT,t);b.info=(e,t)=>J(e,x.DEFAULT,{...t,type:x.INFO});b.error=(e,t)=>J(e,x.DEFAULT,{...t,type:x.ERROR});b.warning=(e,t)=>J(e,x.DEFAULT,{...t,type:x.WARNING});b.warn=b.warning;b.success=(e,t)=>J(e,x.DEFAULT,{...t,type:x.SUCCESS});b.loading=(e,t)=>J(e,x.DEFAULT,be(t,Ke));b.dark=(e,t)=>J(e,x.DEFAULT,be(t,{theme:ee.DARK}));b.remove=e=>{e?w.dismiss(e):w.clear()};b.clearAll=(e,t)=>{xe(()=>{w.clear(e,t)})};b.isActive=e=>{let t=!1;return t=Xe().findIndex(n=>n.toastId===e)>-1,t};b.update=(e,t={})=>{setTimeout(()=>{const n=jt(e);if(n){const o=D(n),{content:a}=o,i={...o,...t,toastId:t.toastId||e,updateId:We()},g=i.render||a;delete i.render,J(g,i.type,i)}},0)};b.done=e=>{b.update(e,{isLoading:!1,progress:1})};b.promise=vn;function vn(e,{pending:t,error:n,success:o},a){var i,g,f;let r;const y={...a||{},autoClose:!1};t&&(r=ke(t)?b.loading(t,y):b.loading(t.render,{...y,...t}));const l={autoClose:(i=a==null?void 0:a.autoClose)!=null?i:!0,closeOnClick:(g=a==null?void 0:a.closeOnClick)!=null?g:!0,closeButton:(f=a==null?void 0:a.autoClose)!=null?f:null,isLoading:void 0,draggable:null,delay:100},u=(h,N,B)=>{if(N==null){b.remove(r);return}const $={type:h,...l,...a,data:B},z=ke(N)?{render:N}:N;return r?b.update(r,{...$,...z,isLoading:!1}):b(z.render,{...$,...z,isLoading:!1}),B},m=Z(e)?e():e;return m.then(h=>{u("success",o,h)}).catch(h=>{u("error",n,h)}),m}b.POSITION=se;b.THEME=ee;b.TYPE=x;b.TRANSITIONS=It;const yn={install(e,t={}){zt.useHandler=t.useHandler||(()=>{}),gn(t)}};typeof window<"u"&&(window.Vue3Toastify=yn);function gn(e={}){const t=be(Ge,e);Qt(t)}const En={class:"container-fluid"},bn={class:"loader loader-fixed"},Sn={class:"border border-2 mb-3 rounded bg-light"},Cn={class:"mb-3 p-3"},_n=["value"],hn={class:"p-3"},Tn={class:"text-capitalize fw-bold mb-0"},An=["value","id"],Nn=["for"],In={key:0,class:"p-3"},On={key:1,class:"p-3"},kn={class:"row g-3 align-items-center"},xn={class:"col-auto"},Ln=["value"],Rn={key:2,class:"p-3 d-flex flex-column"},wn=["onUpdate:modelValue"],Pn={key:3,class:"p-3"},Bn={key:4,class:"p-3"},$n={class:"d-flex justify-content-between align-items-center"},Mn={key:0,class:"input-group"},qn={key:1,class:"input-group"},Dn={class:"card"},Un={class:"card-body"},Fn={class:"d-flex justify-content-end align-items-center mb-3"},Hn={class:"d-flex justify-content-center align-items-center"},Gn={class:"mb-3"},Vn={class:"table table-striped table-sm"},jn={class:"thead-dark"},zn={class:"report-header"},Wn={class:"input-group"},Qn={class:"me-3"},Jn=["onClick"],Kn={key:0,class:"fa fa-caret-down"},Xn={key:1,class:"fa fa-caret-up"},Yn={key:2,class:"fa fa-sort"},oo={__name:"Reports",setup(e){const t=ft(),{queryGroups:n,addQueryGroup:o,setQueryGroups:a}=Le(),i=S(!1),g=S([]),f=S([]),r=S(""),y=S("/generate-report"),l=S(200),u=S(""),m=S(""),h=S({}),N=S({current_page:t.query.p||1,to:1,data:{}}),B=S([]),$=`group-${Math.random()}`,z=S([]),_=S(""),R=S(!1),M=S("");ye(()=>{G(),we(),o($)});const G=()=>{Y.get("/get-dynamic-reports").then(T=>{g.value=T.data.data})},q=()=>{i.value=!0,Y.get(y.value,{params:{fields:f.value,groupBy:r.value,limit:l.value,order:Ce.value,filter:JSON.stringify(n.value),reportType:M.value}}).then(T=>{N.value=T.data.data.records,B.value=f.value,i.value=!1}).finally(()=>{i.value=!1})},we=()=>{Y.get("/get-saved-reports").then(T=>{z.value=T.data.data})},Ye=T=>{m.value=m.value==""?"DESC":m.value=="DESC"?"ASC":"",u.value=m.value==""?"":T,q()},Pe=T=>{if(!i.value){if(T===N.value.current_page)return;N.value.current_page=T,q()}},Ze=()=>{_.value!=""&&Y.post("/save-report",{name:_.value,fields:{fields:f.value,groupBy:r.value,limit:l.value,order:Ce.value,filter:JSON.stringify(n.value),reportType:M.value}}).then(T=>{b(T.data.message,{theme:"colored",type:"success",dangerouslyHTMLString:!0}),tt()})},et=()=>{Y.delete(`/delete-report/${h.value.id}`).then(T=>{G(),we(),o($)})},tt=()=>{R.value=!1,_.value="",f.value=[],r.value="",l.value=200,u.value="",m.value="",h.value={},a({})},nt=()=>{R.value=!1,_.value=""},ot=()=>{Y.patch(`/update-report/${h.value.id}`,{name:_.value,fields:{fields:f.value,groupBy:r.value,limit:l.value,order:Ce.value,filter:JSON.stringify(n.value)}}).then(T=>{})},Ce=A(()=>JSON.stringify({orderBy:u.value,orderDirection:m.value})),at=T=>{if(h.value!=""){let c=JSON.parse(h.value.fields),v=JSON.parse(c.order),k=JSON.parse(c.filter);l.value=c.limit,r.value=c.groupBy,u.value=v.orderBy,m.value=v.orderDirection,f.value=c.fields,_.value=h.value.name,a(k),R.value=!0}},lt=()=>{o(`group-${Math.random()}`)},st=T=>{N.value.data.length&&q()};return ct(l,T=>{N.value.data.length&&q()}),(T,c)=>(d(),p("div",En,[C(pt,{name:"fade"},{default:Be(()=>[L(s("div",bn,"Loading...",512),[[mt,i.value]])]),_:1}),s("div",Sn,[c[14]||(c[14]=s("h2",{class:"ms-3 mt-2"},"Report Builder",-1)),s("section",Cn,[L(s("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":c[0]||(c[0]=v=>h.value=v),onChange:c[1]||(c[1]=v=>at())},[c[7]||(c[7]=s("option",{selected:"",value:""},"Select saved report",-1)),(d(!0),p(O,null,P(z.value,(v,k)=>(d(),p("option",{key:T.field,value:v},W(v.name),9,_n))),128))],544),[[K,h.value]])]),s("section",hn,[c[8]||(c[8]=s("div",{class:"p-3 bg-info bg-opacity-10 border border-info border-3 border-start-3 border-top-0 border-bottom-0",role:"alert"}," Select Fields to generate report ",-1)),(d(!0),p(O,null,P(g.value,(v,k)=>(d(),p("div",{class:"list-group-item",key:v.name},[s("p",Tn,W(k),1),(d(!0),p(O,null,P(v.fields,(V,_e)=>(d(),p("div",{key:_e,class:"form-check form-check-inline"},[L(s("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":c[2]||(c[2]=it=>f.value=it),value:V,id:V.key},null,8,An),[[vt,f.value]]),s("label",{class:"form-check-label",for:V.key},W(V.text),9,Nn)]))),128))]))),128))]),f.value.length>0?(d(),p("section",In,[c[9]||(c[9]=s("div",{class:"d-flex align-items-center mb-1"},[s("p",{class:"text-capitalize fw-bold mb-0 me-3"},"Selected Fields"),s("small",{class:"fst-italic"},"Drag-Drop fields to arrange in order for a report")],-1)),C(j(yt),{class:"dragArea w-full d-flex",list:f.value,onChange:st},{default:Be(()=>[(d(!0),p(O,null,P(f.value,v=>(d(),p("div",{class:"bg-secondary text-white text-center border-1 p-2 me-1",key:v.key},W(v.text),1))),128))]),_:1},8,["list"])])):F("",!0),f.value.length>0?(d(),p("section",On,[s("div",kn,[c[11]||(c[11]=s("div",{class:"col-auto"},[s("label",{for:"inputPassword6",class:"col-form-label"},"GroupBy")],-1)),s("div",xn,[L(s("select",{"onUpdate:modelValue":c[3]||(c[3]=v=>r.value=v),class:"form-select",placeholder:"Select Option"},[c[10]||(c[10]=s("option",{disabled:"",selected:""},"Select Field",-1)),(d(!0),p(O,null,P(f.value,(v,k)=>(d(),p("option",{key:k,value:v.key},W(v.text),9,Ln))),128))],512),[[K,r.value]])]),c[12]||(c[12]=s("div",{class:"col-auto"},[s("span",{id:"passwordHelpInline",class:"form-text text-info"}," Select GroupBy Field to group the report by selected field, or leave it blank. ")],-1))])])):F("",!0),f.value.length>0?(d(),p("section",Rn,[s("div",{class:"d-flex align-items-center"},[s("button",{class:"btn btn-sm btn-primary text-white",onClick:lt},"Add Group")]),(d(!0),p(O,null,P(j(n),(v,k)=>(d(),p(O,{key:k},[k!=0?L((d(),p("select",{key:0,class:"form-select form-select-sm",style:{width:"75px","background-color":"#b2cce5"},"onUpdate:modelValue":V=>j(n)[k].condition=V},c[13]||(c[13]=[s("option",{value:"AND"},"AND",-1),s("option",{value:"OR"},"OR",-1)]),8,wn)),[[K,j(n)[k].condition]]):F("",!0),C(Nt,{fields:f.value,index:v.id},null,8,["fields","index"])],64))),128))])):F("",!0),f.value.length>0?(d(),p("section",Pn,[s("button",{class:"btn btn-success",onClick:q},"Generate")])):F("",!0),f.value.length>0?(d(),p("section",Bn,[s("div",$n,[R.value?(d(),p("div",qn,[L(s("input",{type:"text",class:"form-control",placeholder:"Report Name","aria-label":"Report name","onUpdate:modelValue":c[5]||(c[5]=v=>_.value=v)},null,512),[[oe,_.value]]),s("button",{class:"btn btn-primary text-white",type:"button",onClick:nt},"Save Report As"),s("button",{class:"btn btn-success",type:"button",onClick:ot},"Update Report"),s("button",{class:"btn btn-danger",type:"button",onClick:et},"Delete Report")])):(d(),p("div",Mn,[L(s("input",{type:"text",class:"form-control",placeholder:"Report Name","aria-label":"Report name","onUpdate:modelValue":c[4]||(c[4]=v=>_.value=v)},null,512),[[oe,_.value]]),s("button",{class:"btn btn-primary text-white",type:"button",onClick:Ze},"Save Report")]))])])):F("",!0)]),s("section",Dn,[s("div",Un,[s("div",Fn,[s("div",Hn,[c[16]||(c[16]=s("label",{class:"form-label m-0 me-2"},"PerPage:",-1)),L(s("select",{"onUpdate:modelValue":c[6]||(c[6]=v=>l.value=v),class:"form-select"},c[15]||(c[15]=[Te('<option value="10">Show 10</option><option value="20">Show 20</option><option value="50">Show 50</option><option value="100">Show 100</option><option value="200">Show 200</option><option value="9999999999">Show All</option>',6)]),512),[[K,l.value]])]),c[17]||(c[17]=Te('<div class="filter-button-group"><a title="Print the results" class="btn btn-outline-primary waves-effect"><i class="fa-solid fa-print" aria-hidden="true"></i></a><a title="Download results as PDF" class="btn btn-outline-primary waves-effect"><i class="fa-solid fa-file-pdf" aria-hidden="true"></i></a><a title="Download results as CSV" class="btn btn-outline-primary waves-effect"><i class="fa-solid fa-file-csv" aria-hidden="true"></i></a></div>',1))]),s("div",Gn,[C($e,{class:"card-pagination",data:N.value,loading:i.value,onChange:Pe},null,8,["data","loading"])]),s("table",Vn,[s("thead",jn,[s("tr",zn,[(d(!0),p(O,null,P(B.value,(v,k)=>(d(),p("th",{key:k,scope:"col"},[s("div",Wn,[s("span",Qn,W(v.text),1),s("span",{class:"input-group-text me-2",id:"basic-addon01",onClick:V=>Ye(v.key)},[v.key==u.value&&m.value=="DESC"?(d(),p("i",Kn)):F("",!0),v.key==u.value&&m.value=="ASC"?(d(),p("i",Xn)):F("",!0),v.key!=u.value?(d(),p("i",Yn)):F("",!0)],8,Jn)])]))),128))])]),s("tbody",null,[(d(!0),p(O,null,P(N.value.data,(v,k)=>(d(),p("tr",{key:k},[(d(!0),p(O,null,P(v,(V,_e)=>(d(),p("td",{key:_e},W(V),1))),128))]))),128))])]),s("div",null,[C($e,{class:"card-pagination",data:N.value,loading:i.value,onChange:Pe},null,8,["data","loading"])])])])]))}};export{oo as default};
