import{_ as P,o as r,c as l,b as t,G as p,p as f,J as y,a as R,d as U,g as a,k as h,B as q,z as H,D as I,$ as F,i as O,V as C,w as T,l as x,q as W,T as K,O as S,W as j,C as g,P as X,a0 as Y}from"./app.js";import Z from"./PaginationComponent.js";const $={__name:"Rule",props:["fields"],setup(v,{expose:o}){o();const e={props:v};return Object.defineProperty(e,"__isScriptSetup",{enumerable:!1,value:!0}),e}},ee={class:"d-flex justify-content-between align-items-center border p-2"},te={class:"d-flex align-items-center"},oe={class:"form-select"},se=["value"];function re(v,o,d,e,m,u){return r(),l("div",ee,[t("div",te,[o[0]||(o[0]=t("select",{class:"form-select"},[t("option",{value:"AND"},"AND"),t("option",{value:"OR"},"OR")],-1)),t("select",oe,[(r(!0),l(p,null,f(d.fields,(s,n)=>(r(),l("option",{value:s.key},y(s.text),9,se))),256))]),o[1]||(o[1]=R('<select class="form-select"><option value="EQUAL">is equal</option><option value="notEqual">is not equal</option><option value="IN">contains</option><option value="NOT_IN">does not contain</option><option value="GREATER_THAN">is greater than(&gt;)</option><option value="GREATER_THAN_OR_EQUAL">is greater than(&gt;=)</option><option value="LESS_THAN">is greater than(&lt;) </option><option value="LESS_THAN_OR_EQUAL">is greater than(&lt;=) </option><option value="IS_NULL">is Empty/Blank</option><option value="BETWEEN">Between</option></select><input class="form-control" type="text">',2))]),o[2]||(o[2]=t("button",{class:"btn btn-danger"},[t("i",{class:"fa-solid fa-trash"}),U(" Remove ")],-1))])}const L=P($,[["render",re],["__file","D:/laragon/www/esa/esa-helper/resources/js/pages/reports/Rule.vue"]]),le={__name:"RuleGroup",props:["fields"],setup(v,{expose:o}){o();const d=a([]),e=v,m=()=>{d.value.push(L)},u=h(()=>({fields:e.fields})),s={rules:d,props:e,addRule:m,ruleProps:u,ref:a,computed:h,Rule:L};return Object.defineProperty(s,"__isScriptSetup",{enumerable:!1,value:!0}),s}},ae={class:"d-flex justify-content-between align-items-center border p-2"},ne={class:"d-flex flex-column flex-wrap mt-3"};function ie(v,o,d,e,m,u){return r(),l("div",ae,[t("div",{class:"d-flex align-items-center"},[t("button",{class:"btn btn-sm btn-primary",onClick:e.addRule},"Add Rule"),o[0]||(o[0]=t("p",{class:"text-info m-0 ps-3"},"Add rule to filter records.",-1))]),t("div",ne,[(r(!0),l(p,null,f(e.rules,(s,n)=>(r(),q(I(s),H({key:n,ref_for:!0},e.ruleProps),null,16))),128))]),o[1]||(o[1]=t("button",{class:"btn btn-danger"},[t("i",{class:"fa-solid fa-trash"}),U(" Remove Group ")],-1))])}const V=P(le,[["render",ie],["__file","D:/laragon/www/esa/esa-helper/resources/js/pages/reports/RuleGroup.vue"]]),de={__name:"Reports",setup(v,{expose:o}){o();const d=F(),e=a(!1),m=a([]),u=a([]),s=a(""),n=a("/generate-report"),i=a(200),b=a(""),_=a(""),k=a({current_page:d.query.p||1,to:1,data:{}}),B=a([]),D=a([]),E=a([]);O(()=>{N()});const N=()=>{C.get("/get-dynamic-reports").then(c=>{m.value=c.data.data})},w=()=>{e.value=!0,C.get(n.value,{params:{fields:u.value,groupBy:s.value,limit:i.value,order:A.value}}).then(c=>{k.value=c.data.data.records,B.value=c.data.data.filters,D.value=u.value,e.value=!1}).finally(()=>{e.value=!1})},M=c=>{_.value=_.value==""?"DESC":_.value=="DESC"?"ASC":"",b.value=_.value==""?"":c,w()},Q=c=>{if(!e.value){if(c===k.value.current_page)return;k.value.current_page=c,w()}},A=h(()=>JSON.stringify({orderBy:b.value,orderDirection:_.value})),z=h(()=>({fields:u.value})),J=()=>{E.value.push(V)};T(i,c=>{w()});const G={route:d,loading:e,fields:m,reportFields:u,groupBy:s,reportUrl:n,limit:i,orderBy:b,orderDirection:_,data:k,filters:B,headers:D,ruleGroups:E,getReportColumns:N,genrateReport:w,setOrder:M,changePage:Q,order:A,groupProps:z,addGroup:J,computed:h,onMounted:O,ref:a,watch:T,get axios(){return C},get useRoute(){return F},PaginationComponent:Z,RuleGroup:V};return Object.defineProperty(G,"__isScriptSetup",{enumerable:!1,value:!0}),G}},ce={class:"container-fluid"},ue={class:"loader loader-fixed"},pe={class:"border border-2 mb-3 rounded bg-light"},fe={class:"p-3"},ve={class:"text-capitalize fw-bold mb-0"},_e={class:"form-check form-check-inline"},me=["value","id"],ge=["for"],be={key:0,class:"p-3"},ye={class:"row g-3 align-items-center"},he={class:"col-auto"},ke=["value"],we={key:1,class:"p-3 d-flex flex-column"},xe={key:2,class:"p-3"},Se={key:3,class:"p-3"},Re={class:"card"},Ce={class:"card-body"},Pe={class:"d-flex justify-content-end align-items-center mb-3"},Be={class:"d-flex justify-content-center align-items-center"},De={class:"mb-3"},Ee={class:"table table-striped table-sm"},Ne={class:"thead-dark"},Ae={class:"report-header"},Ge={class:"input-group"},Fe={class:"me-3"},Oe=["onClick"],Te={key:0,class:"fa fa-caret-down"},je={key:1,class:"fa fa-caret-up"},Le={key:2,class:"fa fa-sort"};function Ve(v,o,d,e,m,u){return r(),l("div",ce,[x(K,{name:"fade",persisted:""},{default:W(()=>[S(t("div",ue,"Loading...",512),[[X,e.loading]])]),_:1}),t("div",pe,[o[9]||(o[9]=R('<h2>Report Builder</h2><section class="mb-3 p-3"><select class="form-select" aria-label="Default select example"><option selected>Select saved report</option><option value="1">One</option><option value="2">Two</option><option value="3">Three</option></select></section>',2)),t("section",fe,[o[4]||(o[4]=t("div",{class:"p-3 bg-info bg-opacity-10 border border-info border-3 border-start-3 border-top-0 border-bottom-0",role:"alert"}," Select Fields to generate report ",-1)),(r(!0),l(p,null,f(e.fields,(s,n)=>(r(),l("div",{class:"list-group-item",key:s.name},[t("p",ve,y(n),1),(r(!0),l(p,null,f(s.fields,(i,b)=>(r(),l("div",_e,[S(t("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":o[0]||(o[0]=_=>e.reportFields=_),value:i,id:i.key},null,8,me),[[Y,e.reportFields]]),t("label",{class:"form-check-label",for:i.key},y(i.text),9,ge)]))),256))]))),128))]),e.reportFields.length>0?(r(),l("section",be,[t("div",ye,[o[6]||(o[6]=t("div",{class:"col-auto"},[t("label",{for:"inputPassword6",class:"col-form-label"},"GroupBy")],-1)),t("div",he,[S(t("select",{"onUpdate:modelValue":o[1]||(o[1]=s=>e.groupBy=s),class:"form-select",placeholder:"Select Option"},[o[5]||(o[5]=t("option",{disabled:"",selected:""},"Select Field",-1)),(r(!0),l(p,null,f(e.reportFields,(s,n)=>(r(),l("option",{value:s.key},y(s.text),9,ke))),256))],512),[[j,e.groupBy]])]),o[7]||(o[7]=t("div",{class:"col-auto"},[t("span",{id:"passwordHelpInline",class:"form-text text-info"}," Select GroupBy Field to group the report by selected field, or leave it blank. ")],-1))])])):g("v-if",!0),e.reportFields.length>0?(r(),l("section",we,[t("div",{class:"d-flex align-items-center"},[t("button",{class:"btn btn-sm btn-primary",onClick:e.addGroup},"Add Group")]),x(e.RuleGroup,{fields:e.reportFields},null,8,["fields"]),(r(!0),l(p,null,f(e.ruleGroups,(s,n)=>(r(),q(I(s),H({key:n,ref_for:!0},e.groupProps),null,16))),128))])):g("v-if",!0),e.reportFields.length>0?(r(),l("section",xe,[t("button",{class:"btn btn-success",onClick:e.genrateReport},"Generate")])):g("v-if",!0),e.reportFields.length>0?(r(),l("section",Se,o[8]||(o[8]=[t("div",{class:"d-flex justify-content-between align-items-center"},[t("div",{class:"input-group"},[t("input",{type:"text",class:"form-control",placeholder:"Report Name","aria-label":"Report name"}),t("button",{class:"btn btn-primary",type:"button"},"Save")])],-1)]))):g("v-if",!0)]),t("section",Re,[t("div",Ce,[t("div",Pe,[t("div",Be,[o[11]||(o[11]=t("label",{class:"form-label m-0 me-2"},"PerPage:",-1)),S(t("select",{"onUpdate:modelValue":o[2]||(o[2]=s=>e.limit=s),class:"form-select",onChange:o[3]||(o[3]=s=>v.updatePageLimit())},o[10]||(o[10]=[R('<option value="10">Show 10</option><option value="20">Show 20</option><option value="50">Show 50</option><option value="100">Show 100</option><option value="200">Show 200</option><option value="9999999999">Show All</option>',6)]),544),[[j,e.limit]])]),o[12]||(o[12]=R('<div class="filter-button-group"><a title="Print the results" class="btn btn-primary waves-effect"><i class="fa-solid fa-print" aria-hidden="true"></i></a><a title="Download results as PDF" class="btn btn-primary waves-effect"><i class="fa-solid fa-file-pdf" aria-hidden="true"></i></a><a title="Download results as CSV" class="btn btn-primary waves-effect"><i class="fa-solid fa-file-csv" aria-hidden="true"></i></a></div>',1))]),t("div",De,[x(e.PaginationComponent,{class:"card-pagination",data:e.data,loading:e.loading,onChange:e.changePage},null,8,["data","loading"])]),t("table",Ee,[t("thead",Ne,[t("tr",Ae,[(r(!0),l(p,null,f(e.headers,(s,n)=>(r(),l("th",{key:n,scope:"col"},[t("div",Ge,[t("span",Fe,y(s.text),1),t("span",{class:"input-group-text me-2",id:"basic-addon01",onClick:i=>e.setOrder(s.key)},[s.key==e.orderBy&&e.orderDirection=="DESC"?(r(),l("i",Te)):g("v-if",!0),s.key==e.orderBy&&e.orderDirection=="ASC"?(r(),l("i",je)):g("v-if",!0),s.key!=e.orderBy?(r(),l("i",Le)):g("v-if",!0)],8,Oe)])]))),128))])]),t("tbody",null,[(r(!0),l(p,null,f(e.data.data,(s,n)=>(r(),l("tr",{key:n},[(r(!0),l(p,null,f(s,(i,b)=>(r(),l("td",{key:b},y(i),1))),128))]))),128))])]),t("div",null,[x(e.PaginationComponent,{class:"card-pagination",data:e.data,loading:e.loading,onChange:e.changePage},null,8,["data","loading"])])])])])}const He=P(de,[["render",Ve],["__file","D:/laragon/www/esa/esa-helper/resources/js/pages/reports/Reports.vue"]]);export{He as default};
